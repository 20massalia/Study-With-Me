# 네트워크 기기

TCP/IP 4계층 모델을 기반으로한 네트워크 기기에 대한 설명입니다.

## 1. 애플리케이션 계층

### L7 스위치 (애플리케이션 스위치)
- 역할: 트래픽을 HTTP, HTTPs, FTP 등 애플리케이션 계층 프로토콜 기반으로 분석해 로드밸런싱 처리합니다.
- 특징
  - URL, 쿠기, 세션 등의 애플리케이션 데이터 영역 검사 및 정책 별 분산 처리
  - 웹방화벽(WAF), SSL 오프로드, 복잡한 트래픽 제어 등 고급 기능 제공
- 실제 사용: 클라우드, 대형 웹 서비스, API 게이트 웨이

### L4 로드밸런서와 L7 로드밸런서의 차이는?

- L4 LB: 패킷 헤더만 분석하여 빠르게 세션별로 분산 (딘순 부하 분산)
- L7 LB: 요청의 내용(URL, 쿠키, API 경로)에 따라서 서버 분기 및 세밀한 정책 적용 가능

### 로드밸런싱 알고리즘

- 라운드 로빈(Round Robin): 서버에 순차적으로 요청 분배
- 가중치 라운드 로빈(Weighted Round Robin): 서버 마다 가중치를 부여해, 요청 분배
- 최소 연결(Least Connection): 현재 연결 수가 가장 적은 서버에 요청 할당 (스트리밍과 같이 긴 세션 길이에 적합)
- IP 해시(IP Hash): Client IP를 해시로 만들어서 항상 같은 서버에 연결 (세션 유지에 적합)

> 추가적으로 DNS을 활용한 로드밸런싱 방식도 있습니다.

## 2. 인터넷 계층

### 라우터 

![라우터](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRZy0TyCcibDdBrtHOLOsJgk9LIZsqcjwF2Pw&s)

- 네트워크 간 IP 패킷의 경로 라우팅
- 서로 다른 네트워크 주소 쳬계 연결 (서브넷)
- WAN 및 인터넷 연결 제공

### L3 스위치

- 라우터와 L2 스위치의 중간 형태
- VLAN 라우팅, 빠른 IP 포워딩
- ASIC 기반 하드웨어 고속 처리
- 대형 LAN, 데이터 센터 등에서 사용

### L3 Switch와 Router의 차이는?

![L3 Switch와 Router의 차이](https://www.vsolcn.com/wp-content/uploads/2023/03/image-330.webp)

L3 Switch는 L2 스위치 기능과 라우터 기능을 모두 갖춘 네트워크 장비입니다. IP 주소를 기반으로 패킷의 경로를 제어하고, VLAN 간 통신을 가능하게 하며, 라우팅 기능을 제공합니다.
또한, 라우터와 달리 하드웨어 기반의 ASIC를 사용하며 고속으로 패킷을 라우팅합니다.

> ASIC는 스위치 내에서 트래픽 분배를 하드웨어 레벨에서 처리하는 집적회로 입니다. (일반 라우터는 CPU 사용)

### 라우팅과 포워딩의 차이

| 구분   | 라우팅                               | 포워딩                       |
|------|-----------------------------------|---------------------------|
| 정의   | 전체 네트워크를 분석해서 목적지까지 최적경로를 결정하는 과정 | 결정된 경로를 따라 실제 패킷을 전송하는 과정 |
| 수행위치 | 소프트웨어, 제어 평면(라우팅 프로토콜)            | 하드웨어, 데이터 평면              |
| 결과   | 라우팅 테이블(경로 정보) 생성                 | 패킷을 빠르게 다음 홉 또는 인터페이스로 전송 |
| 주기   | 네트워크 변화시, 주기적                     | 패킷마다 실시간                  |

간단히 요약하면, 라우팅은 최적의 길을 "계획"하는 일, 포워딩은 그 계획에 따라 "실행"하는 일입니다.

### 라우팅 알고리즘

- 정적 라우팅: 관리자가 수동으로 설정
- 동적 라우팅: 라우터가 서로 정보 교환을 통해 동적으로 결정
  - 거리 백터 라우팅(Distance Vector): 각 라우터가 인접 라우터까지의 거리 정보를 주기적으로 교환, 벨만 포드 알고리즘 기반(RIP)
  - 링크 상태 라우팅(Link State): 모든 라우터가 네트워크 전체 정보를 가지고 있으며, 다익스트라 알고리즘으로 최단 경로 계산(OSPF, IS-IS)
  - 경로 벡터 라우팅(Path Vector): 한 경로에 여러 속성을 부여, 대규모 네트워크에서 사용함(BGP)

## 3. 데이터 링크 계층

### L2 스위치

- 이더넷 프레임의 MAC 주소 기반으로 전송 경로 설정
- 브래드캐스트 도메인 분할
- VLAN 지원

### 브릿지

- 두 네트워크 세그먼트를 연결하여 하나의 네트워크 처럼 동작
- MAC 주소 기반 테이블 기반 프레임 전달
- 스위치의 전신

## 4. 물리 계층

### NIC (Network Interface Card)

![](https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Network_card.jpg/1200px-Network_card.jpg)

- 네트워크 장비로 케이블 또는 무선 연결을 통해서 Internet에 연결
- 데이터 신호 변환, MAC 주소 제공

### 리피터 

- 신호 증폭/재생으로 전송 거리 연장
- 데이터 내용 해석 없이 단순 신호만 증폭/복원

### AP (Access Point)

무선 단말기들이 네트워크에 접속하게 해주는 무선 중계장치

- 무선 단말기를 유선 네트워크에 연결
- 무선 LAN(Wi-Fi) 구현

## Reference

https://ko.wikipedia.org/wiki/%EB%9D%BC%EC%9A%B0%ED%84%B0
https://ko.wikipedia.org/wiki/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC_%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4_%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC