# 운영체제의 역할과 구조

운영체제(OS, Operating System)은 컴퓨터 시스템에서 핵심인 소프트웨어입니다. 컴퓨터 하드웨어와 응용 프로그램 사이에 위치해 양쪽의 상호작용을 관리, 제어하는 역할을 담당합니다.

## 1. 운영체제의 역할

### 주요 역할
- 자원관리: CPU, 메모리, I/O 등 컴퓨터 자원을 효율적으로 분배 및 관리, 동시에 여러 프로세스가 자원을 사용할 수 있게 스케쥴링.
- UI 제공: 하드웨어를 직접 제어하지 않고, 추상화된 인터페이스를 제공해 사용자가 쉽게 컴퓨터를 활용할 수 있습니다.
- 파일 시스템: 파일 시스템을 제공해 데이터를 CRUD 하는 환경을 제공합니다.
- I/O 관리
- 오류 검출 및 복구
- 보호 및 보안

### 운영체제의 목적
- 처리능력(Throughput): 단위 시간당 최대 작업 처리.
- 반환시간(Turnaround Time): 한 작업의 요청부터 종료까지 소요되는 시간 최소화.
- 가용성(Availability): 언제든 바로 사용할 수 있는 상태 유지.
- 신뢰도(Reliability): 시스템이 안정적으로 오랜 시간 동작하도록 보장

## 2. 운영체제의 구조

운영체제의 구조는 하드웨어와 직접 통신하는 **커널(Kernel)**을 중심으로 다양한 컴포넌트로 나뉩니다. 일반적인 구조는 다음과 같습니다.

![운영체제의 구조](https://velog.velcdn.com/images/wejaan/post/a566f301-59dc-4114-8525-92ce96e34335/image.png)

```text
[사용자/응용 프로그램]
   ↓
[Shell, GUI] - 사용자 인터페이스(명령줄/그래픽)
   ↓
[System Call] - 응용 프로그램이 OS의 서비스를 요청하는 API 계층
   ↓
[커널(Kernel)] - 운영체제의 핵심: 자원관리, 보안, 프로세스/메모리/디스크 관리
   ↓
[디바이스 드라이버] - OS와 하드웨어를 이어주는 중개자
   ↓
[하드웨어]
```
### 주요 구성요소

#### 커널(Kernel)

![커널](https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Kernel_Layout.svg/1200px-Kernel_Layout.svg.png)

하드웨어 접근, 자원관리(프로세스, 메모리, I/O, 파일 관리 등), 시스템 보호 등 주요 기능을 담당하는 운영체제의 핵심 부분으로 항상 메모리에 상주합니다.

#### 시스템 콜(System Call)

![시스템 콜](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FJXwNG%2Fbtqw787Kgfe%2FAAAAAAAAAAAAAAAAAAAAAL2gZb_0xsZPVx1n4JK7lG3F0PmpSxfVHJ4OmcSBnAAm%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DPWdFysUuujq0cOtzVkXiMCcwLfg%253D)

응용 프로그램(프로세스)이 커널의 기능을 요청할 때 사용하는 인터페이스(API)입니다. 이를 통해 파일 읽기/쓰기, 프로세스 생성 등 작업이 이루어집니다

![유닉스 시스템 콜](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FcA9in9%2Fbtqw9OAIYdZ%2FAAAAAAAAAAAAAAAAAAAAAAkdd5GqELSXxyTAnrjqxffQ0H2LnBco5OZiQpi05pys%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DCSEvw5QW%252FaOf5P4irUwsD3c4Wr4%253D)

우리가 일반적으로 사용하는 프로그램은 '응용프로그램'입니다. 유저 레벨의 프로그램은 유저 레벨의 함수들 만으로는 많은 기능을 구현하기 어렵습니다. 따라서 커널의 도움을 받아야합니다. 이러한 작업은 응용프로그램에서 실행되는 유저 프로세스에서 유저모드에서는 수행 할수 없습니다.
반드시 시스템 콜을 통한 커널 모드로 전환한 뒤에 수행하도록 설계 되어있습니다. 이러한 모드를 구분해 놓는 이유는 권한 설정을 통해 악의적인 접근을 방지하는 목적입니다.

## Q&A

### 시스템 콜의 예시는?

- 파일 조작
  - open(), close(), read(), write(), lseek()
  - 예: 파일을 열고 읽고 쓰기.
- 프로세스 제어
  - fork(), exec(), exit(), wait()
  - 예: 새로운 프로세스 생성, 종료, 상태 대기.
- 메모리 관리
  - mmap(), brk(), sbrk()
- 장치 관리
  - ioctl(), read(), write() (파일 I/O와 장치 I/O의 구분 없이 사용됨)
- 통신
  - socket(), connect(), send(), recv() 
- 시스템 정보 획득
  - getpid(), gettimeofday()

### 운영체제의 Dual Mode (이중 모드)란?
Dual Mode란, 운영체제가 시스템 보안 및 안정성을 위해 두 가지 모드(유저 모드, 커널 모드)로 CPU 동작을 구분하는 구조입니다

- 사용자 모드(User Mode)
  - 일반 사용자 프로그램이 동작하는 제한된 권한의 모드.
  - 시스템 자원에 직접 접근 불가.
- 커널 모드(Kernel Mode)
  - 운영체제 커널 및 드라이버 코드가 실행되는 절대적 권한의 모드.
  - 하드웨어 제어 및 시스템 전체 자원 제어가 가능.
  - 시스템 콜은 유저모드 → 커널모드로 전환하는 유일한 공식 경로임. 이를 통해 보안과 안정성을 유지.

### 유저모드와 커널모드를 구분해야 하는 이유는?

- 보안: 프로그램이 직접 하드웨어나 중요한 시스템 자원에 접근하면 시스템 전체에 영향을 미칠 수 있으므로, 반드시 운영체제를 통해 간접 접근이 이루어져야 안전함.
- 안정성: 유저모드의 오류(Null Pointer, 버퍼 오버플로우 등)가 시스템 전체에 치명적 영향을 주지 않도록 보호함.
- 프로세스 간 보호: 한 프로세스의 오작동이 다른 프로세스나 운영체제를 망가뜨릴 수 없게 함.

## Reference

https://ko.wikipedia.org/wiki/%EC%BB%A4%EB%84%90_%28%EC%BB%B4%ED%93%A8%ED%8C%85%29
https://velog.io/@wejaan/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%BD%9C
https://fjvbn2003.tistory.com/306