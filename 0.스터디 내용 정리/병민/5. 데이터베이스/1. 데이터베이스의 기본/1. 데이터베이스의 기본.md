# 데이터베이스의 기본

데이터베이스에 대해서 알아보기에 앞서서 아래와 같은 기본적인 데이터베이스의 용어에 대해서 알아보려합니다.

1. 엔티티
2. 릴레이션
3. 속성
4. 도메인
5. 필드와 레코드
6. 관계
7. 키

## 1. 엔티티(Entity)

엔티티는 개체라는 이름으로도 불립니다. 엔티티는 조직의 데이터와 관련된 것들을 영속적인 객체, 이벤트 또는 개념입니다.
아래와 같은 그림을 보면 실제로 존재하는 추상적인 객체인 '회원, 상품'이 엔티티라고 볼 수 있습니다.

![엔티티](http://www.jidum.com/upload/ckeditor/2016/07/2016072209585184.png)

## 2. 릴레이션(Relation)

릴레이션은 데이터들의 테이블 형태로 표현한 것으로, 구조를 나타내는 릴레이션 스키마와 실제 값들인 릴레이션 인스턴스로 구성됩니다.

![릴레이션](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2F9PZHv%2Fbtq2lAE2xpY%2FAAAAAAAAAAAAAAAAAAAAAKfI1rC_rV3UdsDa2gn_XmNjx6yLsN7JPh3d30tb73ZB%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DUu%252BokrljsdYMpaqTbMLfOBG%252B2JM%253D)

## 3. 속성(Attribute)

속성은 데이터베이스를 구성하는 가장 작은 논리적 단위입니다. 개체의 특성을 설명합니다. 속성의 수를 디그리(Degree) 또는 차수라고 합니다.

## 4. 도메인(Domain)

도메인은 하나의 속성(Attribute)이 취할 수 있는 같은 타입의 원자값들의 집합입니다.

도메인은 실제 속성 값이 나타날 때 그 값의 합법 여부를 시스템이 검사하는데에도 이용합니다.

## 5. 필드와 레코드

필드(Fields)는 테이블에서 열(Column)에 해당하는 가장 작은 단위의 데이터 집합을 의미합니다.

레코드는(Records or Tuple)은  논리적으로 연관된 필드의 집합을 의미하며 테이블의 행(row)에 대핟되게 됩니다. 튜플이라고도 부릅니다.

## 6. 관계(Relationship)

관계에는 1:1, 1:N, N:M 관계가 있습니다.

### 1:1 관계

![1:1](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FctM422%2FbtrOlLAF46v%2FAAAAAAAAAAAAAAAAAAAAAKnVZwBTY-2gvxZu_HkDE_GvkWFdW65EaMNRpEogPypd%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DlUW04PAXT1%252FzvBTHtMX%252FHKADSY8%253D)

위의 그림을 해석해보자면, 한 명의 사용자는 하나의 전화번호를 가질 수 있으며, 하나의 전화번호는 한 명의 사용자만을 가질 수 있다로 해석할 수 있습니다.

### 1:N 관계 

![1:N](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FxvL99%2FbtrOmVJazqn%2FAAAAAAAAAAAAAAAAAAAAANtzo-1jeblyqYSey3Jt8a1oIS4Km3K-c4FyhCt51u6a%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DxpWQRO%252F2a2E0YyomlRBRhG3yrOw%253D)

해당 관계의 예시로 한 명의 사용자는 여러 개의 전화번호를 가질 수 있으나, 여러 명의 유저가 하나의 전화번호를 가질 수는 없는 구조입니다.

### N:M 관계

N:M 관계를 위해 스키마를 디자인할 때에는 Join 테이블을 만들어 관리합니다. 1:N 관계와 비슷하지만, 양방향에서 다수의 레코드를 가질 수 있습니다.

![N:M-1](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FKwDjK%2FbtrOmsUMWKd%2FAAAAAAAAAAAAAAAAAAAAAFPQ4wYqZhrK4BAtDkvszVQhpX9SHNNnIF9YvBFjISBl%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DkJMGs6kKIJFufjQQj4XpT7rzjf8%253D)

위와 같은 상황일 때에 customer_package라는 새로운 테이블을 만들어 1:N 관계를 두 개로 표현합니다.
이는 고객 한 명이 여러 개의 여행 상품을 가질 수 있고, 여행 상품 하나는 여러 개의 고객을 가질 수 있도록 표현한 것입니다.

![N:M-2](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FdO2vlA%2FbtrOlIREErx%2FAAAAAAAAAAAAAAAAAAAAAM_3xswJhUEgJrxmssz6S3pR-lI4polBRXBWyY3sS0jb%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D9D7NaSuyhnhF1E62Fitek4FcenE%253D)

이러한 방법을 통해서 N:M 관계를 해결할 수 있습니다. 하지만 성능적으로 다른 관계보다 떨어져 신중하게 생각해 도입해야합니다.

### 자기 참조 관계(Self Referencing Relationship)

추가적으로 자기 자신을 참조하는 관계 또한 있습니다.

![자기 참조 관계](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FbB5bnP%2FbtrOlKaRvRv%2FAAAAAAAAAAAAAAAAAAAAANR-eoX2VLkJY8I6VczjKgf3qFa5lRcurQajgpPwN1Wl%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3D9DL%252FloLAT7PJBPavzJQ7jQvE5%252BY%253D)

User 테이블의 recommend_id는 같은 User 테이블의 user_id와 연결되어 있습니다.
한 명의 사용자(user_id)는 한 명의 추천인(recommend_id)을 가질 수 있습니다.
하지만 한 명의 추천인(recommend_id)은 여러 명의 사용자(user_id)에게 추천인으로 등록될 수 있습니다.

위와 같은 관계를 자기 참조 관계라고 합니다.

## 7. 키

키는 아래와 같은 4가지 속성의 조합을 통해서 만들어집니다.

- 최소성: 최소한의 속성으로 튜플을 구분지을 수 있는 키이어야 한다 예를 들어 (주민등록번호, 이름), (주민등록번호, 이름, 주소) 들도 각 개개인을 구분지을 수 있지만, (주민등록번호)하나만으로 각 개개인을 구분지을 수 있으므로 최소성을 만족하는 주식별자는 주민등록번호
- 대표성: 엔터티를 대표할 수 있는 속성
- 유일성: 엔터티의 인스턴스를 유일하게 구분지어 식별할 수 있는 속성
- 불변성: 자주 변경되지 않는 속성

위와 같은 속성을 조합하여 아래와 같은 다양한 키들이 존재할 수 있습니다.
  
- 슈퍼 키(Super Key): 유일성을 만족하는 키. 예를 들면, {학번 + 이름}, {주민등록번호 + 학번}
- 복합 키(Composite Key): 2개 이상의 속성(attribute)를 사용한 키.
- 후보 키(Candidate key): 유일성과 최소성을 만족하는 키. 기본키가 될 수 있는 후보이기 때문에 후보키라고 불린다. 예를 들면, 주민등록번호, 학번 등
- 기본 키(Primary key): 후보 키에서 선택된 키. NULL값이 들어갈 수 없으며, 기본키로 선택된 속성(Attribute)은 동일한 값이 들어갈 수가 없다.
- 대체 키(Surrogate key): 후보 키 중에 기본 키로 선택되지 않은 키.
- 외래 키(Foreign Key): 어떤 테이블(Relation) 간의 기본 키(Primary key)를 참조하는 속성이다. 테이블(Relation)들 간의 관계를 나타내기 위해서 사용된다.

![키](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FnCDWm%2Fbtsr0WbsMH2%2FAAAAAAAAAAAAAAAAAAAAAJHe0Pu_gbB4m99NSi954ecS2qu25iac-1syGg_g_9wC%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DNetgBlmY9uRxalU6rS047Lr2Eek%253D)

## Reference

http://www.jidum.com/jidums/view.do?jidumId=115
https://computer-science-student.tistory.com/194
https://93jpark.tistory.com/23
https://etloveguitar.tistory.com/132
https://inpa.tistory.com/entry/DB-%F0%9F%93%9A-%ED%82%A4KEY-%EC%A2%85%EB%A5%98-%F0%9F%95%B5%EF%B8%8F-%EC%A0%95%EB%A6%AC