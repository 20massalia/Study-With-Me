# DB Lock (락)

## 0. 락(Lock)이란?

-   여러 커넥션에서 동시에 동일한 자원을 요청할 경우, 순서대로 하나의
    커넥션만 변경할 수 있게 해주는 기능\
-   동시성을 제어하기 위한 기능

> 💡 비유: 화장실 칸을 사용할 때\
> - "외부에서 잠금을 건다"가 아니라, "내가 직접 들어가서 내가 잠그는
    > 것"의 관점으로 이해하면 쉽다.

------------------------------------------------------------------------

## 1. 락의 종류

DB 락은 크게 두 가지로 나뉜다. - **공유 Lock (Shared Lock, Read Lock,
S-Lock)** - **배타 Lock (Exclusive Lock, Write Lock, X-Lock)**

------------------------------------------------------------------------

### 1-1. 공유 Lock (Shared Lock, Read Lock, S-Lock)

-   데이터를 변경하지 않는 **읽기 작업**을 위해 잠금\
-   특징:
    -   하나의 세션이 읽는 동안, 다른 세션도 동일 데이터를 읽을 수 있음
        (공유 락 허용)
    -   하지만 다른 세션이 동일 데이터에 쓰기(배타 락)를 걸 수 없음
-   요약:
    -   **세션 A가 공유 락을 획득 → 다른 세션도 공유 락으로 읽을 수
        있지만, 배타 락으로 수정은 불가능**

> 🔑 "내가 데이터 읽는 동안 읽을 수는 있는데, 변경하려고 선점하지
> 마라(X-Lock 금지)"

------------------------------------------------------------------------

### 1-2. 배타 Lock (Exclusive Lock, Write Lock, X-Lock)

-   데이터를 **변경(쓰기 작업)** 하기 위해 잠금\
-   특징:
    -   한 세션이 쓰는 동안, 다른 세션은 읽기(공유 락)도 불가능
    -   동시에 다른 세션이 쓰기(배타 락)도 불가능
-   요약:
    -   **세션 A가 배타 락을 획득 → 다른 세션은 읽기/쓰기 모두 불가능**

> 🔑 "내가 데이터 쓰는 동안 해당 데이터 읽거나 변경하지 마라! (S-Lock,
> X-Lock 금지)"

------------------------------------------------------------------------

