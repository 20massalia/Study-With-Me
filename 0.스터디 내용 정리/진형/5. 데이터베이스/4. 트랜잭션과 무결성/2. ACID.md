# 트랜잭션의 ACID 특성

## ✔️ 원자성(Atomicity)

-   ALL OR NOTHING\
-   트랜잭션은 모두 실행하거나 모두 실행하지 않음의 두 가지 상태만 존재\
-   트랜잭션은 논리적으로 쪼개질 수 없는 작업 단위이기 때문에 내부의
    SQL문들이 모두 성공하거나, 중간에 어떤 하나의 SQL문이라도 실패하면
    지금까지 작업을 모두 취소해 이전 상태로 롤백해야 한다.\
-   즉, 일부만 성공하는 상태는 존재해서는 안 된다.

성공 시 커밋했을 때 DB에 영구적으로 저장하는 것과 실패 시 롤백했을 때
이전 상태로 되돌리는 것은 DBMS가 담당하는 부분이다.\
개발자는 언제 커밋하고 언제 롤백할 지에 대한 기준을 세우고 코드를
작성해야 한다.

------------------------------------------------------------------------

## ✔️ 일관성(Consistency)

-   트랜잭션 이전과 이후에 데이터베이스는 항상 consistent한 상태여야
    한다는 규칙\
-   트랜잭션은 DB 상태를 consistent 상태에서 또 다른 consistent 상태로
    가야 한다.

만약 constraints, trigger 등을 통해 DB에 정의된 규칙을 트랜잭션이
위반했다면 롤백해야 한다.\
예: 계좌 잔액을 업데이트하는 트랜잭션 결과로 잔액이 음수가 되면 롤백해야
한다.

트랜잭션이 DB에 정의된 규칙을 위반했는지는 DBMS가 커밋 전에 확인하고
알려준다.\
그러나 DBMS만 믿지 말고, 애플리케이션 관점에서도 트랜잭션이 일관되게
동작하는지 개발자가 챙겨야 한다.

------------------------------------------------------------------------

## ✔️ 고립성(Isolation)

-   여러 트랜잭션이 동시에 실행될 때에도, 혼자 실행되는 것처럼 동작해야
    한다.\
-   즉, 동시에 실행되는 여러 트랜잭션은 서로 영향을 주지 않고 독립적으로
    실행되는 것처럼 보여야 한다.

DBMS는 여러 종류의 isolation level을 제공하고, 개발자는 어떤 레벨로
트랜잭션을 동작시킬지 설정할 수 있다.\
**Concurrency control**의 목표는 isolation이다.


여러 트랜잭션이 동시에 실행되었을 때, 결과가 이상해지는 문제가 발생할 수
있다.

------------------------------------------------------------------------

## ✔️ 영속성(Durability)

-   커밋된 트랜잭션의 결과는 데이터베이스에 영구적으로 저장되어야 한다.\
-   '영구적 저장' == '비휘발성 메모리(HDD, SSD 등)에 저장'

DB System에 전원이 꺼지거나 문제가 생겨도 커밋된 결과는 계속
데이터베이스에 남아있어야 한다.\
개발자가 할 수 있는 건 많지 않고, durability는 DBMS가 보장한다.
