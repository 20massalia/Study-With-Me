# IP 주소 체계(IPv4, IPv6, DHCP, NAT)

---

## IPv4

**주소 형식 및 크기**
- 32비트 주소 체계
- 점으로 구분된 4옥텟(예: 192.168.0.1)

**주소 구분**
- 네트워크 주소 / 호스트 주소
- 클래스 기반(Classful) vs CIDR(Classless)

클래스 A

첫 번째 비트가 0으로 시작한다.
8비트로 네트워크 식별자를 표시하고, 나머지 24비트는 호스트 식별자를 표시한다.
네트워크 식별자 범위는 1.0.0.0에서 126.0.0.0까지이며, 호스트 식별자는 16,777,214개의 호스트 주소를 가질 수 있다.

클래스 B

첫 번째 비트가 10으로 시작한다.
16비트로 네트워크 식별자를 표시하고, 나머지 16비트는 호스트 식별자를 표시한다.
네트워크 식별자 범위는 128.0.0.0에서 191.255.0.0까지이며, 호스트 식별자는 65,534개의 호스트 주소를 가질 수 있다.

클래스 C

첫 번째 비트가 110으로 시작한다.
24비트로 네트워크 식별자를 표시하고, 나머지 8비트는 호스트 식별자를 표시한다.
네트워크 식별자 범위는 192.0.0.0에서 223.255.255.0까지이며, 호스트 식별자는 254개의 호스트 주소를 가질 수 있다.

클래스 D

첫 번째 비트가 1110으로 시작한다.
클래스 D 주소는 멀티캐스트 주소를 표시하는데 사용된다.
멀티캐스트 주소는 특정 그룹에 속한 호스트들에게 데이터를 전송하기 위해 사용된다.

클래스 E

첫 번째 비트가 1111으로 시작한다.
클래스 E 주소는 예약된 주소로, 특정 목적을 위해 사용될 예정이다.

**서브넷 마스크**
- 기본: 255.0.0.0(/8), 255.255.0.0(/16), 255.255.255.0(/24)
- 가변 길이 서브넷(CIDR)을 통해 유연한 네트워크 분할 가능

**장단점**
- 장점: 간단, 광범위한 지원
- 단점: 주소 고갈, 보안 취약

---

## IPv6

**주소 형식 및 크기**
- 128비트 주소 체계
- 16진수 옥텟 8개, 콜론 구분(예: 2001:0db8:85a3::8a2e:0370:7334)

**주소 압축**
- 연속된 0은 `::`로 축약 가능(한 번만)
- 각 옥텟 내 선행 0 생략 가능

**주소 종류**
- 유니캐스트 (단일 대상)
- 멀티캐스트 (그룹 대상)
- 애니캐스트 (가장 가까운 노드)

**주요 특징**
- 내장 보안(IPsec)
- 자동 구성(Stateless Autoconfiguration)
- 대역폭 및 효율성 개선

---

## DHCP (Dynamic Host Configuration Protocol)

- DHCP란 호스트의 IP주소와 각종 TCP/IP 프로토콜의 기본 설정을 클라이언트에게 자동적으로 제공해주는 프로토콜을 말합니다. DHCP에 대한 표준은 RFC문서에 정의되어 있으며, DHCP는 네트워크에 사용되는 IP주소를 DHCP서버가 중앙집중식으로 관리하는 클라이언트/서버 모델을 사용하게 됩니다. DHCP지원 클라이언트는 네트워크 부팅과정에서 DHCP서버에 IP주소를 요청하고 이를 얻을 수 있습니다.네트워크 안에 컴퓨터에 자동으로 네임 서버 주소, IP주소, 게이트웨이 주소를 할당해주는 것을 의미하고, 해당 클라이언트에게 일정 기간 임대를 하는 동적 주소 할당 프로토콜입니다.
- DHCP장점 : PC의 수가 많거나 PC 자체 변동사항이 많은 경우 IP 설정이 자동으로 되기 때문에 효율적으로 사용 가능하고, IP를 자동으로 할당해주기 때문에 IP 충돌을 막을 수 있습니다.
- DHCP단점 : DHCP 서버에 의존되기 때문에 서버가 다운되면 IP 할당이 제대로 이루어지지 않습니다.
- DHCP서버 : DHCP서버는 네트워크 인터페이스를 위해서 IP주소를 가지고 있는 서버에서 실행되는 프로그램으로 일정한 범위의 IP주소를 다른 클라이언트에게 할당하여 자동으로 설정하게 해주는 역할을 합니다. DHCP서버는 클라이언트에게 할당된 IP주소를 변경없이 유지해 줄 수 있습니다.클라이언트에게 IP 할당 요청이 들어오면 IP를 부여해주고 할당 가능한 IP들을 관리해주게 됩니다.
- DHCP클라이언트 : 클라이언트들은 시스템이 시작하면 DHCP서버에 자신의 시스템을 위한 IP주소를 요청하고, DHCP 서버로부터 IP주소를 부여받으면 TCP/IP 설정은 초기화되고 다른 호스트와 TCP/IP를 사용해서 통신을 할 수 있게 됩니다.즉, 서버에게 IP를 할당받으면 TCP/IP 통신을 할 수 있습니다.

**동작 방식**
1. DHCP Discover (브로드캐스트)
2. DHCP Offer (서버 → 클라이언트)
3. DHCP Request (클라이언트 → 서버)
4. DHCP ACK (서버 → 클라이언트)

**임대 개념**
- 임대 기간(Lease Time) 동안 주소 사용 권한 부여
- 기간 만료 시 갱신 또는 재할당

---

## NAT (Network Address Translation)

**역할**
- 네트워크 주소 변환(network address translation, 줄여서 NAT)은 컴퓨터 네트워킹에서 쓰이는 용어로서, IP패킷의 TCP/UDP 포트 숫자와 소스 및 목적지의 IP 주소 등을 재기록하면서 라우터를 통해 네트워크 트래픽을 주고 받는 기술을 말한다. 한 마디로 Network Address인 IP를 변환(Translation)하겠다는 뜻이다.
- NAT를 이용하는 이유는 대개 사설 네트워크(Private Network)에 속한 여러 개의 호스트가 하나의 공인 IP 주소를 사용하여 인터넷에 접속하기 위함이다.IP 주소에는 Public IP(공인 IP)와 Private IP(사설 IP)가 있다.
- IP를 굳이 두 종류로 나눈 이유를 간단히 말하자면 IPv4 주소의 낭비를 막고 공인 인터넷을 굳이 사용하지 않아도 되는 단말들에게 어느 망이든 중복 사용 가능한 IP를 주기 위함이다. (공인망에서는 공인 IP만이 유통)
- 공인인터넷망과 제 컴퓨터 사이에는 내 컴퓨터에게 IP를 할당해주는 공유기가 있다. 그리고 공유기는 공인 IP를 보유하며 인터넷과 맞닿아있다.
- Private IP(172.30.1.36)뿐인 내 컴퓨터가 외부 서비스(8.8.8.8)을 사용하고자 공유기로 나아가면, 공유기는 Private IP(172.30.1.36)뿐인내 컴퓨터의 IP를 공유기 자신의 공인 IP로 변환(Translation)하게 된다.
- 즉 공유기를 지나 외부 인터넷으로 나아갈 때에는 공유기의 공인 IP를 가지고 원하는 Destination Address로 향하는 것이다. 이것이 바로NAT이라는 기술이다.

**종류**
- SNAT (Source NAT): 내부 → 외부 주소 변환
- DNAT (Destination NAT): 외부 → 내부 주소 변환
- PAT (Port Address Translation, 오버로드 NAT): 하나의 공인 IP로 다수의 내부 호스트 매핑

**장단점**
- 장점: 주소 절약, 보안(내부 숨김)
- 단점: P2P, VoIP 서비스에 장애 가능, 로깅·추적 어려움
