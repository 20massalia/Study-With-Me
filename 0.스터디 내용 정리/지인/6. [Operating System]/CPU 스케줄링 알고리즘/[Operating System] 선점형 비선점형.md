# 선점형 스케줄링과 비선점형 스케줄링

운영체제에서 선점은 ‘빼앗을 수 있음’을 뜻하고, 비선점은 ‘빼앗을 수 없음’을 뜻합니다.

따라서 선점형 스케줄링(Preemptice Scheduling)은 어떤 프로세스가 CPU를 할당받아 실행 중이더라도 운영체제가 CPU를 강제로 빼앗을 수 있는 스케줄링 방식이고, 비선점형 스케줄링(Non-preemptive Scheduling)은 어떤 프로세스가 CPU를 점유하면 다른 프로세스가 이를 빼앗을 수 없는 스케줄링 방식입니다.

<br/>

## 선점형 방식

> 하나의 프로세스가 CPU를 차지하고 있을 때, 우선순위가 높은 다른 프로세스가 현재 프로세스를 중단시키고 CPU를 점유하는 스케줄링 방식

비교적 응답이 빠르다는 장점이 있지만, 처리 시간을 예측하기 힘들고 높은 우선수위 프로세스들이 계속 들어오는 경우 오버헤드를 초래합니다.

실시간 응답환경, Deadline 응답환경 등 우선순위가 높은 프로세스를 빠르게 처리해야 할 경우 등에 유용합니다.

- **라운드 로빈 (Round Robin / RR)**
  - 프로세스마다 같은 크기의 CPU 시간을 할당 (시간 할당량 / Time Slice / Quantum)
  - 프로세스가 할당된 시간 내에 처리 완료를 못하면 준비 큐 리스트의 가장 뒤로 보내지고, CPU는 대기 중인 다음 프로세스로 넘어감
  - 균등한 CPU 점유 시간을 보장하며, 시분할 시스템을 사용
- **SRT (Shortest Remaining Time First)**
  - 가장 짧은 시간이 소요되는 프로세스를 먼저 수행
  - 남은 시간이 더 짧다고 판단되는 프로세스가 준비 큐에 생기면 언제라도 프로세스가 선점됨
- **다단계 큐 (Multi-level Queue)**
  - 작업들을 여러 종류 그룹으로 분할, 여러 개의 큐를 이용하여 상위 단계 작업이 선점
  - 각 큐는 자신만의 독자적인 스케줄링을 가짐
- **다단계 피드백 큐 (Multi-level Feedback Queue)**
  - 입출력 위주와 CPU 위주인 프로세스의 특성에 따라 큐마다 서로 다른 CPU 시간 할당량을 부여
  - **여러 개의 준비 큐(Queue)**
    각 큐는 서로 다른 우선순위(Priority)와 시간 할당량(Time Quantum)을 가짐
    - 상위 큐: 우선순위 높고, 할당 시간 짧다.
    - 하위 큐: 우선순위 낮고, 할당 시간 길다.
  - **프로세스의 이동(Feedback)**
    1. **새로운 프로세스**는 가장 높은 우선순위 큐에 들어감
    2. 할당된 CPU 시간 내에 작업을 마치지 못하면 아래 단계(낮은 우선순위) 큐로 이동
    3. 짧은 작업(입출력 위주, 대화형/interative)은 상위 큐에 머무르고, 긴 작업(CPU 집중)은 점점 아래로 내려감
    4. 마지막 단계 큐에서는 주로 **FCFS(선입선출)** 방식이 적용됨
  - **각 큐마다 개별 알고리즘** 사용
    전형적으로 상위 큐는 RR(라운드 로빈), 하위 큐는 FCFS를 적용할 수 있음

<br/>

## 비선점형 방식

> 한 프로세스가 CPU를 할당받으면 작업 종료 후 CPU 반환 시까지 다른 프로세스는 PCU 점유가 불가능한 스케줄링 방식

모든 프로세스에 대한 요구를 공정하게 처리할 수 있지만, 짧은 작업을 수행하는 프로세스가 긴 작업 종료 시까지 대기해야할 수도 있습니다. (콘베이 현상)

처리시간 편차가 적은 특정 프로세스 환경에 용이합니다.

- **우선순위 스케줄링 (Priority Scheduling)**
  - 각 프로세스 별로 우선순위가 주어지고, 우선순위에 따라 CPU를 할당함.
  - 우선순위가 같을 경우에는 FCFS 방식을 사용하여 공정성을 유지
  - 설정, 자원 상황 등에 따라 우선순위를 선정해 주요/긴급 프로세스에 대한 우선처리가 가능
  - 낮은 우선순위 프로세스가 기아 현상을 겪을 수 있음
- **기한부 스케줄링 (Deadline Scheduling)**
  - 각 작업에 명확한 수행 기한이 주어지며, 지정된 시간 내에 작업이 완료되도록 스케줄링
  - 주로 실시간 시스템에서 사용되며, 마감일을 맞추는 것이 중요한 환경에 적합
  - 작업의 중요도와 마감시간에 따라 우선순위를 동적으로 조정
- **FCFS (First Come First Served) / FIFO (First In First Out)**
  - 가장 단순한 비선점형 스케줄링으로, 프로세스가 준비 큐에 도착한 순서대로 CPU를 할당
  - 구현이 쉽고 직관적이지만, 긴 작업이 먼저 들어오면 짧은 작업들이 오랫동안 기다리는 ‘콘보이 효과’가 발생해 전체 시스템의 효율성이 떨어질 수 있음
  - 공정성은 있지만 응답 시간이 불리
- **SJF (Shortest Job First)**
  - 준비 상태 프로세스들 중 예상 실행 시간이 가장 짧은 작업을 먼저 처리하여 평균 대기 시간을 최소화
  - CPU를 가장 효율적으로 사용할 수 있지만, 실행 시간이 긴 프로세스는 계속 연기되어 기아 현상이 발생할 수 있음
  - 실행 시간 예측이 어렵고, 선점형 환경에서는 SRT(Shortest Remaining Time)가 변형으로 사용됨0
- **HRN (Highest Response Ratio Next)**
  - 대기 중인 프로세스 중 현재 Response Ratio가 가장 높은 것을 선택 (Response Ratio = (대기시간 + 서비스시간) / 서비스시간)
  - SJF 방식의 기아 문제를 개선하며 긴 작업과 짧은 작업 사이의 불공평성을 완화
  - 대기 시간이 길어질수록 우선순위가 올라가는 에이징(Aging) 효과도 내포하고 있어 공정성이 높음

<br/>
<br/>

> 참고
>
> - https://howisitgo1ng.tistory.com/entry/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-7-Scheduling
> - https://rob-coding.tistory.com/31
> - https://eun-jeong.tistory.com/17
