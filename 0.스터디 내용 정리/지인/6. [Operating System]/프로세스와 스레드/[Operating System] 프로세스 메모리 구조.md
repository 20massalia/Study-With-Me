# 프로세스의 메모리 구조

프로세스의 주요 메모리는 크게 **Text, Data, Heap, Stack** 영역으로 구분합니다.

각 영역은 역할과 특징이 다르며, 메모리의 사용 시점과 크기 변화 여부가 다릅니다.

<p align="center">
  <img src="../image/메모리구조.png" alt="메모리구조" width="30%">
</p>

## Text(code) 영역

텍스트 영역은 **프로그램의 실행 코드(명령어)가 저장되는 메모리 영역**입니다.

- 컴파일된 기계어 코드가 저장되며, 프로그램이 시작될 때 메모리에 로드됩니다.
- 읽기 전용 영역으로, 실행 중에 프로세스가 함부로 수정할 수 없습니다.
- 코드 자체를 구성하는 영역이므로 Hex 파일, Bin 파일에 해당하는 내용이 이곳에 위치합니다.
- 메모리 크기는 컴파일 시점에 결정되며, 실행 중에는 변하지 않습니다.

<br/>

## Data 영역

데이터 영역은 **전역 변수와 정적 변수(static)를 저장하는 메모리 영역**입니다.

- 초기값이 있는 전역 변수와 정적 변수는 Data 영역에 저장됩니다.
- 초기값이 없는 전역 변수와 정적 변수는 BSS(Block started by Symbol) 영역에 저장되며, 자동으로 0으로 초기화됩니다.
- 프로그램 로딩 시 메모리 크기가 결정되고, 실행 중에는 크기가 변하지 않습니다.

<br/>

## Heap 영역

힙 영역은 **동적 메모리 할당을 위해 사용되는 영역**입니다.

- C언어의 `malloc()` , `calloc()` 함수나, C++의 `new` 연산자를 통해 런타임에 메모리를 할당받습니다.
- 메모리의 낮은 주소부터 높은 주소 방향으로 확장됩니다.
- 크기는 실행 중에 유동적으로 변하며, 필요에 따라 할당과 해제가 이루어집니다.
- 스택과 같은 주소 공간을 공유하므로, 서로 침범하면 heap overflow나 stack overflow가 발생할 수 있습니다.

<br/>

## Stack 영역

스택 영역은 **함수 호출과 관련된 지역 변수, 매개변수, 복귀 주소 등을 저장하는 영역**입니다.

- 함수 호출 시 생성되고, 함수가 종료되면 메모리가 자동으로 해제됩니다.
- 메모리의 높은 주소에서 낮은 주소 방향으로 확장됩니다.
- 스택 크기는 프로세스 로드 시 운영체제가 할당하며, 런타임에 변경할 수 없습니다.
- 자동으로 증가, 감소하기 때문에 특별한 할당이나 해제 코드가 필요하지 않습니다.

<br/>
<br/>

> 참고
>
> - https://watermelon-sugar.tistory.com/37
> - https://wikidocs.net/165974
