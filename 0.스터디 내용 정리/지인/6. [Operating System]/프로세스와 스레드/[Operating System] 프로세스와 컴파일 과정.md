# 프로세스와 컴파일 과정

## 프로세스란?

프로세스란 컴퓨터에서 현재 실행되고 있는 프로그램을 뜻하며, CPU 스케줄링의 대상이 되는 “작업(task)”이라는 용어와 같이 쓰입니다.

프로세스는 프로그램과 데이터를 기본으로 정상적인 실행을 위해 필요한 환경을 시스템으로부터 부여받은 능동적인 존재입니다.

<p align="center">
  <img src="../image/프로그램프로세스.png" alt="프로그램, 프로세스" width="25%">
</p>

### 프로그램과 프로세스의 차이

하드디스크나 SSD와 같은 저장 장치에 존재하는 실행 파일은 **정적 상태의 프로그램**입니다.

이 프로그램이 운영체제에 의해 메모리에 로드되고, 실행을 위한 각종 자원(코드, 데이터, 스택, 힙 등)이 할당된 뒤 CPU가 명령어를 처리하기 시작하면, 이를 **프로세스**라고 부릅니다.

<br/>

## 프로그램의 개발 및 실행 과정과 컴파일

### **소스 코드 작성과 언어의 발전 배경**

- 과거에는 CPU 아키텍처마다 다른 기계어를 사용했기 때문에, 그에 대응하는 어셈블리어 역시 각기 달랐습니다.
- 이로 인해 새로운 CPU가 등장할 때마다 같은 프로그램도 해당 CPU 구조에 맞춰 어셈블리어로 재작성해야 하는 불편이 있었습니다.
- 이러한 한계를 해결하고자 **하나의 통일된 언어 체계**로 작성할 수 있는 **고급 프로그래밍 언어**(C, C++ 등)가 등장했습니다.
- 개발자는 이 고급 언어로 사람이 읽을 수 있는 형식의 **소스 코드**를 작성합니다.

### **컴파일의 필요성**

- 컴퓨터는 고급 언어를 직접 이해할 수 없기 때문에, 이를 **기계어(0과 1)로 번역하는 과정**이 필요합니다.
- 이 번역 과정을 **컴파일**이라고 하며, 컴파일러·인터프리터·JIT(Just-In-Time Compiler)와 같은 도구가 사용됩니다.

### **컴파일의 주요 단계**

<p align="center">
  <img src="../image/컴파일.png" alt="컴파일" width="60%">
</p>

1. **전처리**: 주석 제거, `#include` 등 헤더 파일 병합, 매크로 치환 및 적용
2. **컴파일**: 전처리된 소스 코드 파일을 중간 코드(어셈블리어)로 변환. 해당 과정에서 언어의 문법 검사가 이뤄지며, 정적인 영역들의 메모리 할당을 수행
3. **어셈블**: 중간 코드를 기계어(오브젝트 코드)로 변환. 오브젝트 코드로 구성된 파일을 오브젝트 파일이라 부름
4. **링킹**: 여러 오브젝트 파일(.o)을 결합해 최종 실행 파일(.exe) 생성

### **실행 파일 준비와 로드**

- 컴파일이 완료되면 실행 파일이 하드디스크나 SSD에 저장됩니다.
- 사용자가 실행 파일을 실행하면 운영체제가 해당 파일을 메모리에 로드합니다.
  - 코드와 데이터를 메모리에 할당
  - 필요한 라이브러리와 리소스 적재

### **프로세스 생성과 실행**

- 운영체제는 프로세스를 생성하고, 주소 공간 할당 및 PCB(프로세스 제어 블록)를 초기화합니다.
- 스케줄러가 CPU 사용 순서를 정하면, CPU가 첫 번째 명령어부터 실행을 시작합니다.
- 이 시점부터 프로그램은 **정적 상태의 코드**가 아니라 **실행 중인 동적 개체(프로세스)**가 됩니다.

<br/>
<br/>

> 참고
>
> - https://bradbury.tistory.com/226
> - https://velog.io/@wn8624/3.3.1-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%99%80-%EC%BB%B4%ED%8C%8C%EC%9D%BC-%EA%B3%BC%EC%A0%95-3.3.5-%EB%A9%80%ED%8B%B0-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8B%B1
> - https://velog.io/@jhur98/%EC%BB%B4%ED%8C%8C%EC%9D%BC%EB%9F%ACcompiler%EC%99%80-%EC%9D%B8%ED%84%B0%ED%94%84%EB%A6%AC%ED%84%B0interpreter%EC%9D%98-%EC%B0%A8%EC%9D%B4
