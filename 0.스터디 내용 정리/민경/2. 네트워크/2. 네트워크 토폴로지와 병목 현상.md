# 네트워크🛜 토폴로지 (network topology)

> 노드와 링크가 어떻게 배치되어 있는지에 대한 방식이자 연결 상태

### 물리적, 논리적 토폴로지
* 물리적 : 실제 케이블, 장비의 물리적 연결 방식
* 논리적 : 데이터가 네트워크를 통해 흐르는 논리적 경로

### 종류

* 트리(Tree)형
* 버스(Bus)형
* 스타(Star)형
* 링(Ring)형
* 메시(Mesh)형

---

## 트리(tree)🌳 토폴로지

> 스타형 토폴로지를 계층적으로 확장한 구조로 계층형 토폴로지라고도 함 <br>
여러 네트워크가 부모-자식 관계, 트리 형태로 연결된 계층형 네트워크


### 구조

```javascript
 [ 루트 노드: Core Router ]
           ↓
┌───────────┴────────────┐
[ 브랜치 노드: Distribution Switch/Router ]
↓           ↓          ↓
[ 리프 노드: Access Switch → 단말 (PC, 프린터 등) ]
```

#### 루트 노드 (Core Layer)

* 네트워크의 중심, 즉 백본(Backbone) 역할
* 모든 트래픽이 이 노드를 경유

#### 브랜치 노드 (Distribution Layer)

* 루트로부터 받은 트래픽을 분산 처리
* 각 브랜치 노드는 자신의 하위 리프 노드 그룹에 집중

#### 리프 노드 (Access Layer)

* 실제 사용자가 연결되는 단말기 수준의 접점<br>
* 브랜치 노드에서 온 트래픽을 직접 사용자에게 전달

| **PC1 -> PC2로 데이터를 전송한다면?**

	PC1 -> 리프 -> 브랜치 -> 루트 -> 브랜치 -> 리프 -> PC2

루트 노드가 모든 트래픽을 직접 처리하진 않으며, 브랜치 노드가 지역 트래픽을 필터링하고 라우팅 <br>
따라서 같은 부서 내 PC간 통신은 루트까지 올라가지 않고 브랜치에서 끝낼 수도 있음

### 특징

중앙 노드에서 시작해 하위 노드가 가지처럼 뻗어가는 구조 <br>

* 기업, 학교, 대형 네트워크에서 흔히 사용 <br>
* 확장성이 뛰어나고 계층적 관리 가능 (노드의 추가와 삭제가 쉽다) <br>
* 부분 장애 시 전체 네트워크 영향 최소화 <br>

하지만

#### 1. 상위 노드 장애 시 하위 전체가 불통
#### 2. 네트워크 설계 및 구축 비용이 상대적으로 비쌈
#### 3. 데이터 흐름이 상위 노드에 집중되어 병목 현상 가능

---

## 버스(Bus)🚌 토폴로지

> 하나의 메인 케이블(버스)에 모든 장비가 직렬로 연결되어 통신하는 방식의 네트워크 구조

모든 노드는 동등한 위치에 있고, 모든 통신은 하나의 선로를 통해 이루어지며 <br>
하나의 노드가 데이터를 전송하면, 나머지 노드들은 이를 수신하고, 자신의 것이 아니면 무시(drop)함

### 구조
```javascript
[PC1]───┬─────┬────┬────[PC4]
        │    │    │
     [버스 케이블 (coaxial cable 등)]
        │
   [터미네이터 (Terminator)]
```

양 끝에는 **Terminator(신호 반사 방지용 저항기)** 가 있어야 한다

| **PC1 -> PC4로 데이터를 전송한다면?**

	전체 버스 선로에 브로드캐스트로 데이터를 전송
	같은 선로에 있는 PC2, PC3도 패킷을 수신하지만 목적지가 본인이 아니기 때문에 무시
	PC4가 수신 후 처리

#### 충돌 문제와 해결 : CSMA/CD

두 노드가 동시에 데이터를 전송한다면 충돌 발생하므로 해결책이 필요 => **CSMA/CD**
<br>

* CS : Carrier Sense (다른 노드가 전송 중인지 먼저 감지)
* MA : Multiple Access (여러 노드가 네트워크를 공유)
* CD : Collision Detection (충돌 발생 시 즉시 전송 중단 후 랜덤 시간 대기 -> 재전송)

버스 선로에 전송이 가능할 때 전송하고, 전송 도중 충돌이 일어났더라도 일정 시간 대기 후 재전송

### 특징

* 구조가 간단하고 설정이 쉬움 <br>
* 허브나 스위치가 필요 없어 초기 비용이 저렴하고 구축 시간이 빠름 <br>
* 작은 네트워크에는 적합


하지만

#### 1. 충돌 발생률이 높아 성능이 저하될 수 있음

* 모든 노드가 하나의 선로를 공유하기 때문에, 동시에 두 노드가 데이터를 전송하면 충돌
* 충돌하면 데이터를 다시 보내야 해서 속도 저하, 지연 시간 증가

#### 2. 메인 케이블 손상 시 전체 네트워크 마비

#### 3. 노드 추가/제거가 전체 네트워크에 영향

* 노드를 추가하거나 제거할 때 반드시 버스 케이블에 물리적으로 연결/분리 <br>
* 이 과정에서 잠시라도 케이블 접속이 불안정해지면 전체 네트워크가 흔들릴 수 있음

#### 4. 거리와 노드 수 제한

* 신호는 케이블을 따라 전파되면서 점점 감쇠 <br>
* 노드가 많아지거나 케이블이 길어질수록 신호가 목적지에 도달하지 못하거나 손실 발생


**-> 3,4번의 이유로 확장성 부족**


#### 5. 양 끝에 터미네이터(Terminator) 없으면 반사 문제로 통신 오류 발생

	Terminator : 신호가 끝나도록 흡수하는 종단 저항기

만약 없다면 신호가 끝에서 반사되어 네트워크 전체가 불안정해짐. <br>

따라서

과거에는 초반 이더넷 LAN 구성에 사용되었으며, 소형 사무실과 실습실 등에서 자주 사용 <br>
하지만 현재는 거의 사용되지 않으며 스타형과 트리형, 즉 스위치 기반 토폴로지로 대체

----

## 스타(star)⭐ 토폴로지

> 모든 노드가 중앙 장치(허브, 스위치)에 각각 독립적으로 연결된 네트워크 구조

각 노드는 중앙 장치와 1:1 직접 연결, 노드 간의 직접 통신은 없으며 항상 중앙 장치를 통해 간접 통신 <br>
하나의 노드에서 전송된 데이터는 중앙 장치를 통해 해당 목적지로 라우팅 <br>
현재 대부분의 LAN에서 사용되는 표준 구조 <br>


### 구조

```javascript
               [ PC1 ]
                 |
[PC2] --- [Hub or Switch] --- [PC3]
                 |
               [ PC4 ]
```

* 중앙 장치를 기준으로 각 노드가 개별 연결
* 중앙 장치가 통신의 중계 역할

### 특징

* 특정 노드의 문제는 네트워크 전체에 영향이 없어 유지보수에 용이 <br>
* 노드를 쉽게 추가하거나 제거할 수 있어 확장성 뛰어남 <br>
* 문제 발생 시 중앙 장치에서 로그로 추적하여 장애 탐지 쉬움 <br>
* 스위치는 목적지 노드에만 데이터 전달하여 충돌 없이 빠른 성능을 보임 <br>

하지만

#### 1. 중심 장치에 의존하기 때문에, 중앙 허브/스위치가 다운되면 전체 네트워크 마비
#### 2. 각 노드에 별도의 케이블이 필요하여 배선 비용 증가
#### 3. 중심 장치의 포트 수가 곧 최대 노드 수, 포트 수에 제한

### 스타형 vs 트리형

트리형은 여러 개의 스타형을 계층적으로 묶은 구조

```javascript
   스타형                       트리형
  [Switch]                 [Core Switch]
   / |  \                   /       \
[PC][PC][PC]         [Dept A Switch] [Dept B Switch]
					    /     \         |
                    [PC1]   [PC2]    [PC3]
```

|항목|스타형|트리형|
|---|---|---|
|정의|모든 노드가 하나의 중앙 장치에 연결|여러 스타형 네트워크를 계층적으로 구성|
|중심 장치| 1개 | 루트 -> 브랜치 -> 리프|
|계층 구조| 없음(1단계) | 있음(2단계 이상)|
|연결 형태| 중앙 집중식 | 계층적 분산 구조|

즉, 스타형의 단일 중심성을 트리형의 다중 중심성과 분산 구조로 진화 <br>
트리형은 스타형의 확장판이자 진화형

---

## 링(Ring)🔗 토폴로지

> 네트워크에 연결된 모든 노드들이 원형(ring) 구조로 연결되어, 데이터가 한 방향(또는 양방향)으로 순차적으로 전달되는 구조

각 노드는 자기 앞 뒤 노드와만 연결되어 있고, <br>
데이터는 고리처럼 연결된 노드를 따라 회전하며 목적지로 전달됨

### 구조
```javascript
[PC1]──[PC2]──[PC3]──[PC4]
  ↑                       ↓
  └─────────────────[PC5]←──┘
```

* 단방향 링 : 데이터가 한 방향으로만 회전
* 양방향 링 (이중 링, Dual Ring) : 반대 방향 경로도 존재 -> 장애 복구용

**PC1 -> PC5 데이터를 전송한다면?**
PC1 -> 2 -> 3 -> 4 순서로 데이터가 전달 <br>
각 노드는 수신한 데이터의 수신자 주소를 확인하여 본인이라면 데이터를 수신하고, 아니라면 다음 노드에 전달

#### Token Ring

* 토큰이라는 특별한 신호를 가진 노드만 데이터 전송 가능
* 전송 충돌 방지 목적

### 특징

* 토큰 방식 사용 시, 오직 한 노드만 전송 가능하여 충돌이 없음 <br>
* 데이터가 정해진 경로를 따라 이동하여 예측 가능한 트래픽 <br>
* 양방향 링 구성 시 한쪽 경로가 끊겨도 반대편으로 우회하여 장애 복구 가능 <br>

하지만

#### 1. 단방향 링 기준 한 노드/케이블 장애 시 전체 마비
#### 2. 노드 수 증가 시 모든 중간 노드를 거쳐야 하기 때문에 지연 증가
#### 3. 노드 추가/제거 시 고리형 연결 해체가 까다로워 유지보수에 어려움
#### 4. 고속 통신에는 부적합


한 노드라도 문제가 생기면 전체 네트워크에 영향을 끼치고, <br>
데이터가 여러 노드를 거치는 구조에서 확장성과 속도 측면에서 한계

### 버스형 vs 링형

|항목|버스형|링형|
|--|--|--|
|공통점| 중앙 장치 없이 노드가 직렬 또는 순환 형태로 연결|
|방식| 브로드 캐스트 방식| 정해진 경로를 따라 하나씩 전달|
|설치|쉬움 | 어려움|
|충돌|충돌 발생 가능| 토큰 방식으로 충돌 없음|

현대 네트워크에서는 둘 다 거의 쓰지 않고, 대부분 스타형 또는 트리형으로 대체

---

## 메시(Mesh)🕸️ 토폴로지

> 모든 노드들이 서로 직접 연결된 구조로, 데이터가 여러 경로로 전달될 수 있어 고가용성과 신뢰성이 높은 네트워크 구조

### 구조

* Full Mesh (완전 메시)

모든 노드가 모든 다른 노드와 직접 연결 <br>
총 연결 수 = n(n-1)/2

```javascript
[PC1]───[PC2]
╲   ╱ ╲   ╱
[PC3]───[PC4]
```

* Partial Mesh (부분 메시)

일부만 직접 연결, 나머지는 중간 경로로 전달

```javascript
[PC1]─────[PC2] 
 │     ╱    │  
 │   ╱      │     
[PC3]───────┘  
 │    ╲  
[PC4]───┘
```


데이터는 가장 최적의 경로 또는 대체 경로를 선택해 전송 가능 <br>
라우팅 알고리즘이 사용될 수 있으며, 하나의 경로가 끊겨도 다른 경로로 우회 가능

### 특징

* 노드가 하나 끊겨도 다른 경로 사용 가능하여 고가용성을 보여줌 <br>
* 자동으로 대체 경로를 선택하여 장애 복구 쉬움 <br>
* 각 노드 간 개별 경로 존재 -> 충돌 거의 없음 <br>
* 특정 노드 간 전용 경로를 설정하여 보안성 높임 <br>

하지만

#### 1. 모든 노드를 연결해야 하므로 물리적, 논리적으로 복잡
#### 2. 케이블 수, 포트 수가 급증하여 고비용
#### 3. 구성, 관리가 복잡하고 라우팅이 필요하여 유지보수가 어려움
#### 4. n이 커질수록 연결 수가 n(n-1)/2로 기하급수적 증가


안정성과 가용성이 좋은 구조로, 장애에 강하고 데이터가 빠르게 우회 가능하지만,
설치/유지 비용이 높고 복잡도가 크다는 단점이 존재


---

# 병목 현상 (BottleNeck) 🍶

> 전체 시스템의 성능이 특정 지점(병목)에서의 처리 능력에 의해 제한되는 현상

Bottle's Neck, 즉 '병의 목'에서 유래한 개념
시스템에서 가장 느린 부분이 전체 속도를 결정

네트워크에서는 특정 장비, 링크, 노드, 경로가 과부하되어
성능 저하, 지연, 데이터 손실을 유발하는 핵심 문제

## 병목과 토폴로지의 관계

#### 버스형

모든 트래픽이 하나의 선로를 공유 <br>
-> 충돌이 많고 병목 발생

#### 링형

한 방향 흐름 + 단일 경로 <br>
-> 하나만 느려고 전체 지연

#### 스타형

모든 트래픽이 중앙 장치로 집중 <br>
-> 성능이 낮을 경우 병목 발생

#### 트리형

상위 노드(루트)가 과부화되면 하위 전체 영향 <br>
-> 계층 분산으로 일부 완화 가능

#### 메시형

다중 경로 존재 <br>
-> 병목 시 우회 가능 (장비 자체 문제 외에는 병목 적음)