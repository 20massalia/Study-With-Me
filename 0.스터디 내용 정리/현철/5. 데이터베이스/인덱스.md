# 인덱스
인덱스는 MySQL이 데이터를 더 효율적으로 검색하도록 도와주는 구조로, 특히 데이터가 많을수록 그 효과가 두드러진다. MySql은 B+Tree 기반 인덱스를 사용하는데, 이 구조의 탐색 과정에서 디스크 접근 방식이 성능에 큰 영향을 주게된다. 그래서 인덱스에 대해 알아보기 전 디스크 접근 방식인 랜덤I/O와 순차I/O에 대해 간단히 알아보자.

## 랜덤 I/O (Random I/O)
랜덤 I/O는 디스크의 서로 떨어진 위치에서 데이터를 읽거나 쓸 때 발생하는 입출력 방식. 책에서 중간중간 필요한 페이지만 펴서 읽는 것처럼, 디스크 헤드가 여러 위치로 이동해야 해서 속도가 느림.
- 디스크 헤드의 이동이 많음
- 응답 시간이 길어질 수 있음

## 순차 I/O (Sequential I/O)
순차 I/O는 디스크에서 연속된 위치의 데이터를 읽거나 쓸 때 발생하는 입출력 방식. 예를 들어, 책을 한 장씩 차례로 넘기며 읽는 것처럼, 디스크의 헤드가 연속된 블록을 따라 움직이기 때문에 헤드 이동이 최소화되고 속도가 빠름.

- 디스크의 물리적인 이동이 적음
- 캐시 활용이 용이함
- 대용량 데이터 처리에 유리

정리하자면, 랜덤 I/O는 속도가 느리지만 유연한 접근이 가능하고, 순차 I/O는 속도가 빠르지만 연속된 데이터에 적합하다.
MySQL에서 인덱스를 사용할 때 이 두 I/O 방식이 어떻게 발생하고, 성능에 어떤 영향을 주는지 이해하는 것은 인덱스를 효과적으로 활용하는 데 중요한 기반이 된다.

## 인덱스란?
인덱스는 MySQL이 테이블에서 데이터를 빠르게 검색할 수 있도록 도와주는 데이터 구조다. 데이터베이스에서는 수많은 행 중 원하는 데이터를 찾기 위해 풀 스캔(전체 탐색)을 할 수도 있지만, 이는 매우 비효율적이다. 그래서 인덱스를 통해 원하는 데이터의 위치를 빠르게 찾을 수 있게 한다. 마치 책의 목차나 전화번호부처럼, 필요한 내용을 빠르게 찾도록 돕는다.

## 인덱스의 구조
MySQL(InnoDB)은 기본적으로 B+Tree 기반의 인덱스를 사용한다. B+Tree에서 B는 Binary(이진) 가 아니라 Balanced(균형 잡힌)를 의미한다. 이진 트리와 달리, B+Tree는 하나의 노드가 여러 개의 자식 노드를 가질 수 있어 데이터를 효과적으로 관리할 수 있다. B+Tree의 특징 중 하나는 실제 데이터가 리프 노드에만 저장된다는 점이다. 루트 노드와 중간 브랜치 노드에는 리프 노드로 가는 경로를 나타내는 키 값만 저장된다. 또한, 리프 노드들은 Linked List 형태로 연결되어 있어 범위 탐색 시에도 매우 효율적이다.

- B+Tree는 균형 이진 트리(Binary Tree)보다 더 많은 데이터를 가지면서도 균형을 유지할 수 있는 트리 구조다.
- 모든 데이터는 리프 노드에 저장되고, 리프 노드는 오름차순으로 연결되어 있어 범위 검색도 효율적이다.
- 루트 → 내부 노드 → 리프 노드로 탐색하면서 원하는 키를 빠르게 찾을 수 있다. 이 과정은 로그(log N) 시간 복잡도로 매우 효율적이다.

## 인덱스의 장점과 단점
### 장점
- 수백만 건의 데이터 중 원하는 값을 빠르게 찾을 수 있음
- WHERE 조건, JOIN, ORDER BY, GROUP BY 등에서 성능 향상
- 커버링 인덱스를 활용하면 테이블에 접근하지 않고도 결과를 반환 가능

### 단점
- 데이터를 INSERT, UPDATE, DELETE할 때마다 인덱스도 갱신
- 인덱스가 많을수록 쓰기 작업의 오버헤드가 증가
- 디스크에 추가적인 공간이 필요함
- 정렬 상태를 유지해야 하므로 B+Tree 구조에서 노드 분할 등 추가 연산 발생

## 왜 저장 비용을 감수하면서 까지 인덱스를 사용할까?
데이터를 삽입하거나 수정할 때마다 인덱스도 함께 갱신되어야 하므로,인덱스는 쓰기 작업의 성능을 일부 희생하게 된다. 그럼에도 불구하고 인덱스를 사용하는 이유는 대부분의 시스템에서 읽기 작업의 빈도가 쓰기 작업보다 훨씬 많다. 따라서 읽기 속도를 높이기 위해 일부 저장/쓰기 성능을 희생하는 것이, 전체 시스템의 효율성 면에서 더 유리한 경우가 많다. 이는 특히 검색 중심의 서비스나 사용자 응답 속도가 중요한 애플리케이션에서 더욱 중요하게 작용한다. 결국 인덱스는 저장 비용을 감수하면서도 시스템 전반의 응답성과 효율성을 높이기 위한 선택이라 할 수 있다.

