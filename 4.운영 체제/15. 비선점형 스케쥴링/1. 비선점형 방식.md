# CPU Scheduling

> 정의 : CPU를 사용하려고 하는 프로세스들 사이의 우선순위를 관리하는 작업,
자원을 어떤 프로세스에 얼마나 할당하는지 정책을 만드는 것

> 프로세스들에게 자원을 최대한 공평하게 배분하며 처리율과 CPU 이용률을 증가시키고, 오버헤드. 응답시간
대기시간을 최소화하기 위한 기법

> 선점형 스케줄링과 비선점형 스케줄링이 있음

---

## Review . . .

## CPU 스케줄링이 발생하는 상황
1. 실행 상태에 있던 프로세스가 I/O 요청 등에 의해 Block 상태가 되는 경우
2. 실행 상태에 있던 프로세스가 타이머 인터럽트 발생에 의해 준비 상태로 되는 경우
3. I/O 요청으로 Block 상태에 있던 프로세스의 I/O 작업이 완료되어 인터럽트가 발생하고,
그 결과 이 프로세스의 상태가 준비 상태로 바뀌는 경우
4. CPU에서 실행 상태에 있는 프로세스가 종료되는 경우

## 프로세스의 생명주기
![](https://t1.daumcdn.net/cfile/tistory/27033450580366160E)

---

# 비선점형 스케줄링

> 정의 : 한 프로세스가 CPU를 할당받으면 작업 종료 후 **CPU 반환 시까지 다른 프로세스는
PCU는 점유가 불가능**한 스케줄링 방식

> 모든 프로세스에 대한 요구를 공정하게 처리할 수 있지만, 짧은 작업을 수행하는 프로세스가 긴 작업 종료 시 까지
대기해야할 수도 있다. (콘베이 현상)

> 처리시간 편차가 적은 특정 프로세스 환경에 용이

---

# 용어들 . . .

## 1. 우선순위 (Priority)

![](https://media.vlpt.us/post-images/pa324/e820d2b0-159f-11ea-934d-7b176b41c2f3/image.png)

### 각 프로세스 별로 우선순위가 주어지고, 우선순위에 따라 CPU를 할당함
### 우선 순위가 같을 경우 FCFS
### 설정, 자원 상황 등에 따른 우선순위를 선정해 주요/긴급 프로세스에 대한 우선처리가 가능

## 2. 기한부 (Deadline)

### 작업들이 명시된 기간이나 기한 내에 완료되도록 계획
### 각 프로세스마다 끝내야 하는 기간과 그에 따른 이익이 명시돼있고, 이익을 최대로 할 수 있는 알고리즘을 사용해서 구현한다.

---

## FCFS (First Come First Served) / FIFO (First In First Out)

![](https://upload.wikimedia.org/wikipedia/commons/thumb/0/0c/Thread_pool.svg/400px-Thread_pool.svg.png)

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FdufF6d%2FbtqtWhgy7Zl%2FAAAAAAAAAAAAAAAAAAAAAOeLrGSyshNeKrBOBs14nn6JzWvViRQYMPHVKXHLm6gX%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3DvO0WHBPWmubiFYKtM11zv80emb4%253D)

![](https://t1.daumcdn.net/cfile/tistory/99FBAB405CC6C63029)

### - 프로세스가 대기 큐에 도착한 순서에 따라 CPU를 할당

---

## SJF (Shortest Job First)

![](https://media.vlpt.us/post-images/pa324/7d6a5c80-159e-11ea-934d-7b176b41c2f3/image.png)

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FbzYkhC%2FbtqtY8oiA3Q%2FAAAAAAAAAAAAAAAAAAAAAExAiNX4QMc40me3U1Zin4ntudTfhPWPId9BmeeJVxaV%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1756652399%26allow_ip%3D%26allow_referer%3D%26signature%3Dy66xLd61wjmcuLedWTbKBLgdBg4%253D)

![](https://t1.daumcdn.net/cfile/tistory/999F5B405CC6C63014)

### - 프로세스가 도착하는 시점에 따라 그 당시 가장 작은 서비스 시간을 갖는 프로세스가 종료 시까지 자원 선점
### - 준비 큐 작업 중 가장 짧은 작업부터 수행하므로 평균 대기시간이 최소
### - CPU 요구시간이 긴 작업과 짧은 작업 간의 불평등이 심하여, CPU 요구시간이 긴 프로세스는 기아 현상이 발생

### * 기아 현상 (Starvation)
### - 시스템 부하가 많아서 낮은 등급에 있는 준비 큐의 프로세스가 무한정 기다리는 현상.
### - 이를 해결하기 위해 오랫동안 기다린 프로세스의 우선순위를 높여주는 에이징 기법

---

## HRN (Highest Response Ratio Next)

### - 대기 중인 프로세스 중 현재 Response Ratio가 가장 높은 것을 선택
### (Response Ratio = ((대기시간 + 서비스 시간)/ 서비스 시간))

![](https://kldp.org/files/aaa_6.jpg)

### - 위의 예시에서 P1과 P2가 들어오는 시점에는 대기하고 있는 프로세스가 없으므로 바로 실행한다.
### - P2가 끝나는 9ms에서는 P2가 수행하는 기간 동안 P3, P4, P5 세가지 프로세스가 모두 대기하게 되는데,
### 이때 Response Ratio를 계산해보면 P3는 (5+4)/4 = 2.25 , P4는 (3+5)/5 = 1.6, P5는 (1+2)/2 = 1.5 이므로 P3가 먼저 실행된다
### - P3가 끝나는 13ms에서는 P4, P5가 대기하는데, Response Ratio가 P4가 2.4, P5는 3.5로 더 큰 P5가 먼저 실행된다

---

Reference
- https://eun-jeong.tistory.com/17
